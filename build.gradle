plugins {
	id 'org.springframework.boot' version "$springBootVersion" apply(false)
	id 'io.spring.dependency-management' version "$springDependencyManagerVersion" apply(false)
	id 'com.google.cloud.tools.jib' version "$jibVersion" apply(false)
	id 'java'
}


allprojects {
	repositories {
		mavenCentral()
	}
	apply plugin: 'java'

	group = 'az.ingress'
	def hash = 'git rev-parse --short HEAD'.execute().text.trim()
	version = "$projectVersion.$hash"
}

subprojects {
	sourceCompatibility = jdk_version
	targetCompatibility = jdk_version

	tasks.withType(Test) {
		maxParallelForks = Runtime.runtime.availableProcessors().intdiv(2) ?: 1
	}

	configurations {
		compileOnly {
			extendsFrom annotationProcessor
		}
	}

}
